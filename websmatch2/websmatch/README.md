This is the code of the [WebSmatch] project, re-package using maven.

Only a limited set of functionalities have been debugged and are now working.


###Package the web application war

  1. The lib folder contain jar dependencies that need to be installed on the local maven repo.
     - To do so, go in [lib] and execute `install_dep.sh`.
  2. Package with maven: `mvn package`
     - the webapp is packaged in the `target/WebSmatch.war` files
     - if other things have been done, in particular if `mvn gwt:run` has been used, clean before packaging:
       `mvn clean gwt:clean package` (gwt run generate some local configuration which needs to be removed)


###File, folder and DB access

  - UploadFileServlet (and possibly other) use a folder to store uploaded file. This folder is given by the
    `xlsStorageDir` context param (in web.xml) and should be writable for the servlet container.
    - TODO: put the property somewhere else (see [deployment parameters])?

  - /tmp/websmatch.log need to be writable. Their are potential conflict if run with several servlet container
    (i.e. gwt:run and tomcat) on the same computer.

  - A mongodb should be running, config are set in [mongodbconf.xml]
    (loaded by the `MongoDBConfLoader` class). It seems to create a DB for each user, named as the
    user. Not sure what it does afterward.
    - TODO: for prod, change the mongodb host.
    - TODO: put the conf file somewhere else (see [deployment parameters])?

  - A mysql DB should be running, config are set in [dbconf.xml]
    (loaded by the `MySQLDBConfLoader` class). It is used at least for login (see `LoginServiceImpl` class),
    containing:
     - a db "datapublica" with table "users" having column "user_name", "password" and "id_user"
     - a db "matching_results" with table "user_grants" having column "id_user" and "id_group"

###Unordered notes

  - To run gwt super dev mode, do `mvn gwt:run`. Works on chrome and not on recent firefox
     - then open 127.0.0.1:8888 in chrome
     - it is necessary to have package the project `mvn package`, at least when the project has been cleaned
  - the src/main folder contains the (java) source and webapp files that are not generated by gwt
     - the src/main/java/org/inria/wensmatch/gwt/spreadsheet contains the gwt (client and server) code
  - gwt compilation, which is called when doing `mvn gwt:compile` (itself called by `mvn package`) takes all
    gwt client code and generate a bunch of .js and .rpc files in target/WebSmatch/WebSmatch.
    Read the [GWT compile faq] for details.

  - Could not make the login service work: as I did not setup the mysql DB. So `LoginServiceImpl.login()`
    currently always returns a default value.
     - TODO: make it work again
     - TODO: remove the caught message from error dialog (coded in SpreadsheetViewer onFailure)


[WebSmatch]: http://websmatch.gforge.inria.fr/
[GWT compile faq]: http://www.gwtproject.org/doc/latest/FAQ_DebuggingAndCompiling.html
[deployment parameters]: http://stackoverflow.com/q/30459624/1206998
[mongodbconf.xml]: src/main/java/org/inria/websmatch/db/mongodbconf.xml
[dbconf.xml]: src/main/java/org/inria/websmatch/db/dbconf.xml
